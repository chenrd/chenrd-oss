<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

<title>Plupload - Custom example</title>

   <!-- Load Queue widget CSS and jQuery -->

<style type="text/css">@import url(js/jquery.ui.plupload/css/jquery.ui.plupload.css);</style>
 

<script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>

<script type="text/javascript" src="js/jquery-ui.js"></script>

<link rel="stylesheet" href="jquery-ui.css"/>

<!-- Third party script for BrowserPlus runtime (Google Gears included in Gears runtime now) -->

<script type="text/javascript" src="http://bp.yahooapis.com/2.4.21/browserplus-min.js"></script>

 

<!-- Load plupload and all it's runtimes and finally the jQuery UI queue widget -->

<script type="text/javascript" src="js/plupload.full.min.js"></script>

<script type="text/javascript" src="js/jquery.ui.plupload/jquery.ui.plupload.js"></script>

 

<script type="text/javascript">

    // Convert divs to queue widgets when the DOM is ready

    $(function () {

        $("#uploader").plupload({

            // General settings

            runtimes: 'gears,flash,silverlight,browserplus,html5', // 这里是说用什么技术引擎

            url: 'uploadFiles.ashx', // 服务端上传路径

            max_file_size: '10mb', // 文件上传最大限制。

            chunk_size: '1mb', // 上传分块每块的大小，这个值小于服务器最大上传限制的值即可。

            unique_names: true, // 上传的文件名是否唯一

 

            // Resize images on clientside if we can

            //// 是否生成缩略图（仅对图片文件有效）

            resize: { width: 320, height: 240, quality: 90 },

 

            // Specify what files to browse for

            ////  这个数组是选择器，就是上传文件时限制的上传文件类型

            filters: [

{ title: "Image files", extensions: "jpg,gif,png" },

{ title: "Zip files", extensions: "zip,rar,7z" }

],

 

            // Flash settings

            // plupload.flash.swf 的所在路径

            flash_swf_url: 'js/plupload.flash.swf',

 

            // Silverlight settings

            // silverlight所在路径

            silverlight_xap_url: 'js/plupload.silverlight.xap'

        });

 

        // Client side form validation

        $('form').submit(function (e) {

            var uploader = $('#uploader').plupload('getUploader');

 

            // Files in queue upload them first

            if (uploader.files.length > 0) {

                // When all files are uploaded submit form

                uploader.bind('StateChanged', function () {

                    if (uploader.files.length === (uploader.total.uploaded + uploader.total.failed)) {

                        $('form')[0].submit();

                    }

                });

 

                uploader.start();

            } else

                alert('You must at least upload one file.');

 

            return false;

        });

    });

</script>

 

</head>

<body>

    <form id="form1" runat="server">

    <div>

     <h2>一次选择多个文件进行上传</h2>

    </div>

     <div id="uploader" style="width: 600px">

        <p>You browser doesn't have Flash, Silverlight, Gears, BrowserPlus or HTML5 support.</p>

    </div>

    </form>

</body>

</html>